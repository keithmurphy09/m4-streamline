<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M4 Streamline - Business Management for Tradies</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = { darkMode: 'class' }
    </script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- Supabase (MUST load before config.js which calls createClient) -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- Google Maps -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCksBsfkY_17GI_uvi3suaeGa19LSKkUQA&libraries=places&callback=Function.prototype" async defer></script>

    <!-- Your existing CSS -->
    <link rel="stylesheet" href="micro-interactions.css">
    <link rel="stylesheet" href="mobile-optimization.css">

    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">

    <style>
        [x-cloak] { display: none !important; }
        .dark { color-scheme: dark; }

        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        .dark ::-webkit-scrollbar-track { background: #1f2937; }
        ::-webkit-scrollbar-thumb { background: #888; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }

        /* Landing page hidden until auth check completes */
        #landing { display: none; }

        :root {
            --teal: #00c9a7;
            --teal-dark: #00a88c;
            --teal-glow: rgba(0, 201, 167, 0.15);
            --black: #0a0a0a;
            --card: #1a1a1a;
            --border: rgba(255,255,255,0.08);
            --text: #ffffff;
            --muted: rgba(255,255,255,0.5);
        }

        #landing * { box-sizing: border-box; }

        #landing body, #landing {
            font-family: 'DM Sans', sans-serif;
            background: var(--black);
            color: var(--text);
            overflow-x: hidden;
            margin: 0; padding: 0;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(0.8); }
        }

        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* NAV */
        #landing nav {
            position: fixed; top: 0; left: 0; right: 0; z-index: 100;
            padding: 20px 40px;
            display: flex; align-items: center; justify-content: space-between;
            background: rgba(10,10,10,0.85);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
        }

        .lp-nav-logo { display: flex; align-items: center; gap: 12px; text-decoration: none; }
        .lp-logo-mark { width: 36px; height: 36px; background: var(--teal); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-family: 'DM Mono', monospace; font-weight: 500; font-size: 14px; color: #000; }
        .lp-logo-text { font-size: 16px; font-weight: 600; color: #fff; }
        .lp-logo-text span { color: var(--teal); }
        .lp-nav-actions { display: flex; align-items: center; gap: 12px; }

        .lp-btn-signin {
            padding: 8px 20px; border: 1px solid var(--border); background: transparent;
            color: #fff; border-radius: 8px; font-family: 'DM Sans', sans-serif;
            font-size: 14px; font-weight: 500; cursor: pointer; text-decoration: none; transition: all 0.2s;
        }
        .lp-btn-signin:hover { border-color: var(--teal); color: var(--teal); }

        .lp-btn-trial {
            padding: 8px 20px; background: var(--teal); color: #000; border: none;
            border-radius: 8px; font-family: 'DM Sans', sans-serif; font-size: 14px; font-weight: 600;
            cursor: pointer; text-decoration: none; transition: all 0.2s;
        }
        .lp-btn-trial:hover { background: var(--teal-dark); transform: translateY(-1px); }

        /* HERO */
        .lp-hero {
            min-height: 100vh; display: flex; flex-direction: column;
            align-items: center; justify-content: center; text-align: center;
            padding: 120px 40px 80px; position: relative; overflow: hidden;
            background: var(--black);
        }
        .lp-hero::before {
            content: ''; position: absolute; top: -200px; left: 50%; transform: translateX(-50%);
            width: 800px; height: 800px;
            background: radial-gradient(circle, rgba(0,201,167,0.12) 0%, transparent 70%);
            pointer-events: none;
        }
        .lp-badge {
            display: inline-flex; align-items: center; gap: 8px; padding: 6px 16px;
            background: var(--teal-glow); border: 1px solid rgba(0,201,167,0.3);
            border-radius: 100px; font-size: 13px; color: var(--teal); font-weight: 500;
            margin-bottom: 32px; animation: fadeUp 0.6s ease both;
        }
        .lp-badge::before { content: ''; width: 6px; height: 6px; background: var(--teal); border-radius: 50%; animation: pulse 2s infinite; }

        .lp-hero h1 { font-size: clamp(42px, 6vw, 80px); font-weight: 700; line-height: 1.1; letter-spacing: -0.03em; margin-bottom: 24px; animation: fadeUp 0.6s 0.1s ease both; color: #fff; }
        .lp-hero h1 .lp-highlight { color: var(--teal); }
        .lp-hero p { font-size: clamp(16px, 2vw, 20px); color: var(--muted); max-width: 560px; line-height: 1.6; margin-bottom: 48px; animation: fadeUp 0.6s 0.2s ease both; }

        .lp-ctas { display: flex; gap: 12px; align-items: center; justify-content: center; flex-wrap: wrap; animation: fadeUp 0.6s 0.3s ease both; }

        .lp-btn-primary {
            padding: 14px 32px; background: var(--teal); color: #000; border: none;
            border-radius: 10px; font-family: 'DM Sans', sans-serif; font-size: 16px; font-weight: 600;
            cursor: pointer; text-decoration: none; transition: all 0.2s; display: inline-flex; align-items: center; gap: 8px;
        }
        .lp-btn-primary:hover { background: var(--teal-dark); transform: translateY(-2px); box-shadow: 0 20px 40px rgba(0,201,167,0.3); }

        .lp-btn-secondary {
            padding: 14px 32px; background: transparent; color: #fff;
            border: 1px solid var(--border); border-radius: 10px; font-family: 'DM Sans', sans-serif;
            font-size: 16px; font-weight: 500; cursor: pointer; text-decoration: none; transition: all 0.2s;
        }
        .lp-btn-secondary:hover { border-color: var(--teal); color: var(--teal); }
        .lp-note { font-size: 13px; color: var(--muted); margin-top: 16px; animation: fadeUp 0.6s 0.4s ease both; }

        /* PREVIEW */
        .lp-preview { padding: 0 40px 100px; display: flex; justify-content: center; background: var(--black); animation: fadeUp 0.8s 0.5s ease both; }
        .lp-preview-inner { max-width: 1100px; width: 100%; background: var(--card); border: 1px solid var(--border); border-radius: 16px; overflow: hidden; box-shadow: 0 0 0 1px rgba(0,201,167,0.1), 0 40px 120px rgba(0,0,0,0.8), 0 0 80px rgba(0,201,167,0.05); }
        .lp-preview-bar { background: #161616; padding: 12px 20px; display: flex; align-items: center; gap: 8px; border-bottom: 1px solid var(--border); }
        .lp-dot { width: 10px; height: 10px; border-radius: 50%; }
        .lp-dot.r { background: #ff5f57; } .lp-dot.y { background: #ffbd2e; } .lp-dot.g { background: #28c840; }
        .lp-url { margin-left: 12px; background: rgba(255,255,255,0.05); border-radius: 6px; padding: 4px 16px; font-family: 'DM Mono', monospace; font-size: 12px; color: var(--muted); }

        .lp-stat { background: #111; border: 1px solid var(--border); border-radius: 12px; padding: 20px; }
        .lp-stat-label { font-size: 11px; text-transform: uppercase; letter-spacing: 0.08em; color: var(--muted); margin-bottom: 8px; }
        .lp-stat-value { font-size: 28px; font-weight: 700; color: #fff; font-family: 'DM Mono', monospace; }
        .lp-stat-value.t { color: var(--teal); }
        .lp-stat-value.a { color: #f59e0b; }
        .lp-stat-sub { font-size: 12px; color: var(--muted); margin-top: 4px; }
        .lp-stat-badge { display: inline-block; padding: 2px 8px; border-radius: 100px; font-size: 11px; font-weight: 600; margin-bottom: 8px; }
        .lp-stat-badge.g { background: rgba(0,201,167,0.15); color: var(--teal); }

        /* SOCIAL PROOF */
        .lp-proof { padding: 40px; display: flex; justify-content: center; gap: 60px; flex-wrap: wrap; border-top: 1px solid var(--border); border-bottom: 1px solid var(--border); background: var(--black); }
        .lp-proof-item { text-align: center; }
        .lp-proof-num { font-size: 36px; font-weight: 700; color: var(--teal); font-family: 'DM Mono', monospace; }
        .lp-proof-label { font-size: 14px; color: var(--muted); margin-top: 4px; }

        /* FEATURES */
        .lp-features { padding: 100px 40px; max-width: 1100px; margin: 0 auto; background: var(--black); }
        .lp-section-label { font-size: 12px; text-transform: uppercase; letter-spacing: 0.12em; color: var(--teal); font-weight: 600; margin-bottom: 16px; font-family: 'DM Mono', monospace; }
        .lp-section-title { font-size: clamp(32px, 4vw, 52px); font-weight: 700; letter-spacing: -0.02em; line-height: 1.1; margin-bottom: 16px; color: #fff; }
        .lp-section-sub { font-size: 18px; color: var(--muted); max-width: 500px; line-height: 1.6; margin-bottom: 60px; }

        .lp-features-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
        .lp-feature-card { background: var(--card); border: 1px solid var(--border); border-radius: 16px; padding: 32px; transition: all 0.3s; position: relative; overflow: hidden; }
        .lp-feature-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, transparent, var(--teal), transparent); opacity: 0; transition: opacity 0.3s; }
        .lp-feature-card:hover { border-color: rgba(0,201,167,0.3); transform: translateY(-4px); box-shadow: 0 20px 60px rgba(0,0,0,0.4); }
        .lp-feature-card:hover::before { opacity: 1; }
        .lp-feature-icon { width: 44px; height: 44px; background: var(--teal-glow); border: 1px solid rgba(0,201,167,0.2); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 20px; margin-bottom: 20px; }
        .lp-feature-title { font-size: 18px; font-weight: 600; margin-bottom: 10px; color: #fff; }
        .lp-feature-desc { font-size: 14px; color: var(--muted); line-height: 1.6; }

        /* AI SECTION */
        .lp-ai { padding: 80px 40px; background: linear-gradient(135deg, rgba(0,201,167,0.05) 0%, transparent 60%); border-top: 1px solid var(--border); border-bottom: 1px solid var(--border); }
        .lp-ai-inner { max-width: 1100px; margin: 0 auto; display: grid; grid-template-columns: 1fr 1fr; gap: 80px; align-items: center; }
        .lp-ai-card { background: var(--card); border: 1px solid var(--border); border-radius: 16px; overflow: hidden; }
        .lp-ai-header { padding: 16px 20px; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; }
        .lp-ai-title { font-size: 14px; font-weight: 600; color: #fff; }
        .lp-ai-badge { background: var(--teal-glow); border: 1px solid rgba(0,201,167,0.3); color: var(--teal); font-size: 11px; font-weight: 600; padding: 3px 10px; border-radius: 100px; }
        .lp-ai-item { padding: 16px 20px; border-bottom: 1px solid var(--border); }
        .lp-ai-item:last-child { border-bottom: none; }
        .lp-ai-item-title { font-size: 13px; font-weight: 600; margin-bottom: 4px; color: #fff; }
        .lp-ai-item-desc { font-size: 12px; color: var(--muted); margin-bottom: 6px; }
        .lp-ai-action { font-size: 12px; color: var(--teal); }
        .lp-ai-action::before { content: 'üí° Action: '; }

        /* PRICING */
        .lp-pricing { padding: 100px 40px; max-width: 900px; margin: 0 auto; text-align: center; background: var(--black); }
        .lp-pricing-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-top: 60px; text-align: left; }
        .lp-pricing-card { background: var(--card); border: 1px solid var(--border); border-radius: 20px; padding: 40px; position: relative; transition: all 0.3s; }
        .lp-pricing-card.featured { border-color: rgba(0,201,167,0.4); background: linear-gradient(135deg, rgba(0,201,167,0.05) 0%, var(--card) 100%); }
        .lp-pricing-card:hover { transform: translateY(-4px); box-shadow: 0 30px 80px rgba(0,0,0,0.5); }
        .lp-pricing-badge { position: absolute; top: -12px; left: 50%; transform: translateX(-50%); background: var(--teal); color: #000; font-size: 11px; font-weight: 700; padding: 4px 16px; border-radius: 100px; white-space: nowrap; }
        .lp-pricing-type { font-size: 13px; color: var(--muted); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 8px; font-family: 'DM Mono', monospace; }
        .lp-pricing-name { font-size: 24px; font-weight: 700; margin-bottom: 8px; color: #fff; }
        .lp-pricing-price { font-size: 48px; font-weight: 700; color: var(--teal); font-family: 'DM Mono', monospace; line-height: 1; margin-bottom: 4px; }
        .lp-pricing-period { font-size: 14px; color: var(--muted); margin-bottom: 32px; }
        .lp-pricing-features { list-style: none; margin-bottom: 32px; padding: 0; }
        .lp-pricing-features li { display: flex; align-items: center; gap: 10px; font-size: 14px; color: rgba(255,255,255,0.8); padding: 6px 0; border-bottom: 1px solid rgba(255,255,255,0.04); }
        .lp-pricing-features li::before { content: '‚úì'; color: var(--teal); font-weight: 700; font-size: 13px; flex-shrink: 0; }
        .lp-pricing-cta { display: block; width: 100%; padding: 14px; border-radius: 10px; font-family: 'DM Sans', sans-serif; font-size: 15px; font-weight: 600; cursor: pointer; text-decoration: none; text-align: center; transition: all 0.2s; border: none; }
        .lp-pricing-cta.p { background: var(--teal); color: #000; }
        .lp-pricing-cta.p:hover { background: var(--teal-dark); transform: translateY(-1px); box-shadow: 0 10px 30px rgba(0,201,167,0.3); }
        .lp-pricing-cta.s { background: transparent; color: #fff; border: 1px solid var(--border); }
        .lp-pricing-cta.s:hover { border-color: var(--teal); color: var(--teal); }
        .lp-pricing-note { font-size: 13px; color: var(--muted); text-align: center; margin-top: 24px; }

        /* TRADIES */
        .lp-tradies { padding: 80px 40px; background: var(--card); border-top: 1px solid var(--border); }
        .lp-tradies-inner { max-width: 1100px; margin: 0 auto; text-align: center; }
        .lp-trades-grid { display: flex; flex-wrap: wrap; gap: 12px; justify-content: center; margin-top: 40px; }
        .lp-trade-pill { padding: 10px 20px; background: rgba(255,255,255,0.04); border: 1px solid var(--border); border-radius: 100px; font-size: 14px; color: rgba(255,255,255,0.7); transition: all 0.2s; }
        .lp-trade-pill:hover { border-color: var(--teal); color: var(--teal); background: var(--teal-glow); }

        /* CTA */
        .lp-cta { padding: 120px 40px; text-align: center; position: relative; overflow: hidden; background: var(--black); }
        .lp-cta::before { content: ''; position: absolute; bottom: -100px; left: 50%; transform: translateX(-50%); width: 600px; height: 600px; background: radial-gradient(circle, rgba(0,201,167,0.08) 0%, transparent 70%); pointer-events: none; }
        .lp-cta h2 { font-size: clamp(36px, 5vw, 64px); font-weight: 700; letter-spacing: -0.02em; margin-bottom: 20px; color: #fff; }
        .lp-cta p { font-size: 18px; color: var(--muted); margin-bottom: 48px; }

        /* FOOTER */
        .lp-footer { padding: 40px; border-top: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 20px; background: var(--black); }
        .lp-footer-logo { display: flex; align-items: center; gap: 10px; text-decoration: none; }
        .lp-footer-logo-mark { width: 28px; height: 28px; background: var(--teal); border-radius: 6px; display: flex; align-items: center; justify-content: center; font-family: 'DM Mono', monospace; font-size: 11px; font-weight: 500; color: #000; }
        .lp-footer-logo-text { font-size: 14px; font-weight: 600; color: var(--muted); }
        .lp-footer-links { display: flex; gap: 24px; flex-wrap: wrap; }
        .lp-footer-links a { font-size: 13px; color: var(--muted); text-decoration: none; transition: color 0.2s; }
        .lp-footer-links a:hover { color: var(--teal); }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            #landing nav { padding: 16px 20px; }
            .lp-hero { padding: 100px 20px 60px; }
            .lp-preview { padding: 0 20px 60px; }
            .lp-preview-stats { grid-template-columns: repeat(2, 1fr) !important; }
            .lp-features { padding: 60px 20px; }
            .lp-features-grid { grid-template-columns: 1fr; }
            .lp-ai-inner { grid-template-columns: 1fr; gap: 40px; }
            .lp-pricing { padding: 60px 20px; }
            .lp-pricing-grid { grid-template-columns: 1fr; }
            .lp-proof { gap: 30px; padding: 40px 20px; }
            .lp-cta { padding: 80px 20px; }
            .lp-footer { flex-direction: column; text-align: center; padding: 30px 20px; }
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900">

<!-- Your existing app div ‚Äî untouched -->
<div id="app"></div>

<!-- 
    LANDING PAGE
    Hidden by default. Auth check below reveals it only if user is NOT logged in.
    All buttons call hideLanding() which hides this and triggers renderAuth() ‚Äî your existing login screen.
-->
<div id="landing">

    <nav>
        <a href="#" class="lp-nav-logo">
            <div class="lp-logo-mark">M4</div>
            <span class="lp-logo-text"><span>M4</span> Streamline</span>
        </a>
        <div class="lp-nav-actions">
            <button onclick="hideLanding()" class="lp-btn-signin">Sign In</button>
            <button onclick="hideLanding()" class="lp-btn-trial">Start Free Trial</button>
        </div>
    </nav>

    <!-- HERO -->
    <section class="lp-hero">
        <div class="lp-badge">Built for Australian Tradies</div>
        <h1>Run your trade business<br><span class="lp-highlight">without the chaos</span></h1>
        <p>Quotes, invoices, scheduling, expenses and AI-powered business insights ‚Äî all in one clean dashboard. Built specifically for sole traders and small trade businesses.</p>
        <div class="lp-ctas">
            <button onclick="hideLanding()" class="lp-btn-primary">Start 14-Day Free Trial ‚Üí</button>
            <a href="#lp-features" class="lp-btn-secondary">See Features</a>
        </div>
        <p class="lp-note">No credit card required ¬∑ Cancel anytime ¬∑ Setup in minutes</p>
    </section>

    <!-- DASHBOARD PREVIEW -->
    <div class="lp-preview">
        <div class="lp-preview-inner">
            <div class="lp-preview-bar">
                <div class="lp-dot r"></div>
                <div class="lp-dot y"></div>
                <div class="lp-dot g"></div>
                <div class="lp-url">m4streamline.com/dashboard</div>
            </div>
            <div style="padding: 24px; background: #111;">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px; flex-wrap: wrap; gap: 12px;">
                    <div>
                        <div style="font-size: 24px; font-weight: 700; color:#fff;">Dashboard</div>
                        <div style="font-size: 13px; color: rgba(255,255,255,0.4);">Your business at a glance</div>
                    </div>
                    <div style="font-size: 13px; color: rgba(255,255,255,0.4); font-family: 'DM Mono', monospace;">Monday, February 23, 2026</div>
                </div>
                <div class="lp-preview-stats" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px;">
                    <div class="lp-stat">
                        <div class="lp-stat-badge g">25.3% margin</div>
                        <div class="lp-stat-label">Total Revenue</div>
                        <div class="lp-stat-value">$63,710</div>
                        <div class="lp-stat-sub">All time</div>
                    </div>
                    <div class="lp-stat">
                        <div class="lp-stat-badge g">35.5% margin</div>
                        <div class="lp-stat-label">Net Profit</div>
                        <div class="lp-stat-value t">$16,100</div>
                        <div class="lp-stat-sub">$47,610 expenses</div>
                    </div>
                    <div class="lp-stat">
                        <div class="lp-stat-label">Outstanding</div>
                        <div class="lp-stat-value a">$7,259</div>
                        <div class="lp-stat-sub">1 unpaid invoice</div>
                    </div>
                    <div class="lp-stat">
                        <div class="lp-stat-label">Active Jobs</div>
                        <div class="lp-stat-value">1</div>
                        <div class="lp-stat-sub">9 accepted quotes</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SOCIAL PROOF -->
    <div class="lp-proof">
        <div class="lp-proof-item"><div class="lp-proof-num">100%</div><div class="lp-proof-label">Quote win rate</div></div>
        <div class="lp-proof-item"><div class="lp-proof-num">3.3</div><div class="lp-proof-label">Days avg invoice paid</div></div>
        <div class="lp-proof-item"><div class="lp-proof-num">35.5%</div><div class="lp-proof-label">Avg profit margin</div></div>
        <div class="lp-proof-item"><div class="lp-proof-num">14</div><div class="lp-proof-label">Day free trial</div></div>
    </div>

    <!-- FEATURES -->
    <section class="lp-features" id="lp-features">
        <div class="lp-section-label">Everything you need</div>
        <h2 class="lp-section-title">Stop juggling<br>spreadsheets and paper</h2>
        <p class="lp-section-sub">Every tool a tradie needs, none of the complexity of enterprise software.</p>
        <div class="lp-features-grid">
            <div class="lp-feature-card"><div class="lp-feature-icon">üìã</div><div class="lp-feature-title">Quotes & Invoices</div><div class="lp-feature-desc">Create professional quotes in minutes. Convert to invoice with one click. Email or SMS directly to clients. Track what's paid and outstanding.</div></div>
            <div class="lp-feature-card"><div class="lp-feature-icon">üìÖ</div><div class="lp-feature-title">Job Scheduling</div><div class="lp-feature-desc">Schedule jobs, track progress and manage your calendar. See upcoming jobs at a glance and never double-book again.</div></div>
            <div class="lp-feature-card"><div class="lp-feature-icon">üí∞</div><div class="lp-feature-title">Expense Tracking</div><div class="lp-feature-desc">Log materials, labour and overheads per job. See profit and loss on every single job so you know exactly what you're making.</div></div>
            <div class="lp-feature-card"><div class="lp-feature-icon">ü§ñ</div><div class="lp-feature-title">AI Business Insights</div><div class="lp-feature-desc">Get intelligent analysis ‚Äî profit margins vs industry benchmarks, payment collection speed, client concentration risk and more.</div></div>
            <div class="lp-feature-card"><div class="lp-feature-icon">üìä</div><div class="lp-feature-title">Analytics Dashboard</div><div class="lp-feature-desc">Revenue trends, most profitable clients, expense breakdowns and quote win rates ‚Äî all in one clean dashboard.</div></div>
            <div class="lp-feature-card"><div class="lp-feature-icon">üë•</div><div class="lp-feature-title">Team Management</div><div class="lp-feature-desc">Add team members, assign jobs, track individual performance and manage multiple crews from one place.</div></div>
        </div>
    </section>

    <!-- AI SECTION -->
    <section class="lp-ai">
        <div class="lp-ai-inner">
            <div>
                <div class="lp-section-label">AI Powered</div>
                <h2 class="lp-section-title" style="font-size: clamp(28px, 3vw, 42px);">Your business,<br>analysed automatically</h2>
                <p style="font-size: 16px; color: var(--muted); line-height: 1.7; margin-top: 16px;">M4 Streamline doesn't just store your data ‚Äî it analyses it. Get actionable insights about your profit margins, payment speed, and business health without hiring an accountant.</p>
            </div>
            <div class="lp-ai-card">
                <div class="lp-ai-header">
                    <span class="lp-ai-title">ü§ñ AI Business Insights</span>
                    <span class="lp-ai-badge">6 insights</span>
                </div>
                <div class="lp-ai-item">
                    <div class="lp-ai-item-title">Payment Collection Speed</div>
                    <div class="lp-ai-item-desc">Invoices paid in 3.3 days ¬∑ 27 days faster than NET 30 terms</div>
                    <div class="lp-ai-action">Excellent! Clients are paying quickly</div>
                </div>
                <div class="lp-ai-item">
                    <div class="lp-ai-item-title">Profit Margin Analysis</div>
                    <div class="lp-ai-item-desc">Current margin: 35.5% ¬∑ 5.5% above industry benchmark</div>
                    <div class="lp-ai-action">Excellent profitability ‚Äî maintain current strategy</div>
                </div>
                <div class="lp-ai-item">
                    <div class="lp-ai-item-title">Client Concentration Risk</div>
                    <div class="lp-ai-item-desc">High revenue from single client detected</div>
                    <div class="lp-ai-action">Consider diversifying your client base</div>
                </div>
            </div>
        </div>
    </section>

    <!-- PRICING -->
    <section class="lp-pricing" id="lp-pricing">
        <div class="lp-section-label">Simple Pricing</div>
        <h2 class="lp-section-title">No surprises.<br>No lock-in.</h2>
        <p class="lp-section-sub" style="margin: 0 auto;">Start free for 14 days then choose the plan that fits your business.</p>
        <div class="lp-pricing-grid">
            <div class="lp-pricing-card">
                <div class="lp-pricing-type">Sole Trader</div>
                <div class="lp-pricing-name">Just you</div>
                <div class="lp-pricing-price">$49<span style="font-size:24px">.95</span></div>
                <div class="lp-pricing-period">per month ¬∑ cancel anytime</div>
                <ul class="lp-pricing-features">
                    <li>Unlimited quotes & invoices</li>
                    <li>Job scheduling</li>
                    <li>Expense tracking per job</li>
                    <li>AI business insights</li>
                    <li>Analytics dashboard</li>
                    <li>Email & SMS to clients</li>
                    <li>PDF export</li>
                </ul>
                <button onclick="selectedAccountType='sole_trader'; hideLanding();" class="lp-pricing-cta s">Start Free Trial</button>
            </div>
            <div class="lp-pricing-card featured">
                <div class="lp-pricing-badge">Most Popular</div>
                <div class="lp-pricing-type">Business</div>
                <div class="lp-pricing-name">You + your team</div>
                <div class="lp-pricing-price">$89<span style="font-size:24px">.95</span></div>
                <div class="lp-pricing-period">per month ¬∑ cancel anytime</div>
                <ul class="lp-pricing-features">
                    <li>Everything in Sole Trader</li>
                    <li>Team member accounts</li>
                    <li>Job assignment per team member</li>
                    <li>Expenses per team member</li>
                    <li>Team performance tracking</li>
                    <li>Priority support</li>
                </ul>
                <button onclick="selectedAccountType='business'; hideLanding();" class="lp-pricing-cta p">Start Free Trial</button>
            </div>
        </div>
        <p class="lp-pricing-note">‚úì No credit card required &nbsp;&nbsp; ‚úì 14-day free trial &nbsp;&nbsp; ‚úì Cancel anytime</p>
    </section>

    <!-- TRADIES -->
    <section class="lp-tradies">
        <div class="lp-tradies-inner">
            <div class="lp-section-label">Built for your trade</div>
            <h2 class="lp-section-title">Works for any trade business</h2>
            <div class="lp-trades-grid">
                <div class="lp-trade-pill">üîå Electricians</div>
                <div class="lp-trade-pill">üîß Plumbers</div>
                <div class="lp-trade-pill">üèóÔ∏è Builders</div>
                <div class="lp-trade-pill">ü™£ Painters</div>
                <div class="lp-trade-pill">ü™ü Glaziers</div>
                <div class="lp-trade-pill">üåø Landscapers</div>
                <div class="lp-trade-pill">‚ùÑÔ∏è Air Con</div>
                <div class="lp-trade-pill">üè† Renovators</div>
                <div class="lp-trade-pill">ü™µ Carpenters</div>
                <div class="lp-trade-pill">üß± Concreters</div>
                <div class="lp-trade-pill">üõÅ Tilers</div>
                <div class="lp-trade-pill">üîë Locksmiths</div>
            </div>
        </div>
    </section>

    <!-- CTA -->
    <section class="lp-cta">
        <h2>Ready to streamline<br>your business?</h2>
        <p>Join tradies across Australia who've ditched the spreadsheets.</p>
        <div class="lp-ctas">
            <button onclick="hideLanding()" class="lp-btn-primary">Start Your Free 14-Day Trial ‚Üí</button>
            <a href="mailto:m4projectsanddesigns@gmail.com" class="lp-btn-secondary">Talk to us</a>
        </div>
        <p class="lp-note" style="margin-top: 20px;">No credit card required ¬∑ Setup in minutes ¬∑ Cancel anytime</p>
    </section>

    <!-- FOOTER -->
    <footer class="lp-footer">
        <a href="#" class="lp-footer-logo">
            <div class="lp-footer-logo-mark">M4</div>
            <span class="lp-footer-logo-text">M4 Streamline</span>
        </a>
        <div class="lp-footer-links">
            <a href="#lp-features">Features</a>
            <a href="#lp-pricing">Pricing</a>
            <a href="mailto:m4projectsanddesigns@gmail.com">Contact</a>
        </div>
    </footer>

</div><!-- end #landing -->


<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     ALL ORIGINAL SCRIPTS ‚Äî completely unchanged from your repo
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

<!-- Supabase -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<!-- FullCalendar -->
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>

<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>

<!-- Google Maps -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCksBsfkY_17GI_uvi3suaeGa19LSKkUQA&libraries=places&callback=Function.prototype" async defer></script>

<!-- Core Application Files -->
<script src="js/config.js"></script>
<script src="js/auth.js"></script>
<script src="js/utils.js"></script>

<!-- Main Module Files -->
<script src="js/dashboard.js"></script>
<script src="js/clients.js"></script>
<script src="js/quotes.js"></script>
<script src="js/invoices.js"></script>
<script src="js/schedule.js"></script>
<script src="js/expenses.js"></script>
<script src="js/company.js"></script>
<script src="js/analytics.js"></script>
<script src="js/cashflow.js"></script>
<script src="js/budget.js"></script>
<script src="js/reports.js"></script>

<!-- CRUD & Modal Operations -->
<script src="js/crud.js"></script>
<script src="js/modals.js"></script>

<!-- PDF Generator -->
<script src="js/pdf-generator.js"></script>

<!-- Advanced Features -->
<script src="confetti.js"></script>
<script src="smart-filters.js"></script>
<script src="shimmer-loading.js"></script>
<script src="ai-insights.js"></script>
<script src="document-templates.js"></script>
<script src="email-automation-settings.js"></script>
<script src="email-automation.js"></script>
<script src="advanced-scheduling.js"></script>
<script src="client-portal.js"></script>
<script src="global-handlers.js"></script>

<!-- App Controller (MUST BE LAST) -->
<script src="js/app.js"></script>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     LANDING PAGE LOGIC
     Runs after all scripts load so supabaseClient is available.
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script>
    // Hide landing page and show the login form (your existing renderAuth())
    function hideLanding() {
        document.getElementById('landing').style.display = 'none';
        if (typeof renderAuth === 'function') renderAuth();
    }

    // On load: if already logged in, checkAuth() handles everything as normal.
    // If not logged in, show the landing page instead of renderAuth().
    window.addEventListener('load', async () => {
        try {
            const { data: { session } } = await supabaseClient.auth.getSession();
            if (session) {
                // Already logged in ‚Äî run your normal auth flow, skip landing page
                if (typeof checkAuth === 'function') checkAuth();
            } else {
                // Not logged in ‚Äî show landing page
                document.getElementById('landing').style.display = 'block';
            }
        } catch(e) {
            // Fallback ‚Äî if anything fails just run normal checkAuth
            if (typeof checkAuth === 'function') checkAuth();
        }
    });
</script>

</body>
</html>
