<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M4 Streamline - Business Management</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="micro-interactions.css">
    <link rel="stylesheet" href="mobile-optimization.css">
    
    <style>
        [x-cloak] { display: none !important; }
        
        .dark {
            color-scheme: dark;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        .dark ::-webkit-scrollbar-track {
            background: #1f2937;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900">
    <div id="app"></div>
    
    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- FullCalendar -->
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>
    
    <!-- jsPDF for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <!-- Core Application Files -->
    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/utils.js"></script>
    
    <!-- Main Module Files -->
    <script src="js/dashboard.js"></script>
    <script src="js/clients.js"></script>
    <script src="js/quotes.js"></script>
    <script src="js/invoices.js"></script>
    <script src="js/schedule.js"></script>
    <script src="js/expenses.js"></script>
    <script src="js/company.js"></script>
    <script src="js/analytics.js"></script>
    <script src="js/cashflow.js"></script>
    <script src="js/budget.js"></script>
    <script src="js/reports.js"></script>
    
    <!-- CRUD & Modal Operations -->
    <script src="js/crud.js"></script>
    <script src="js/modals.js"></script>
    
    <!-- PDF Generator -->
    <script src="js/pdf-generator.js"></script>
    
    <!-- Advanced Features (Root Level) -->
    <script src="confetti.js"></script>
    <script src="smart-filters.js"></script>
    <script src="shimmer-loading.js"></script>
    <script src="ai-insights.js"></script>
    <script src="document-templates.js"></script>
    <script src="email-automation-settings.js"></script>
    <script src="email-automation.js"></script>
    <script src="advanced-scheduling.js"></script>
    <script src="client-portal.js"></script>
    <script src="global-handlers.js"></script>
    
    <!-- App Controller (MUST BE LAST) -->
    <script src="js/app.js"></script>
    
    <!-- Initialize -->
    <script>
        window.addEventListener('load', () => {
            if (typeof checkAuth === 'function') {
                checkAuth();
            }
        });
    </script>
</body>
</html>
